<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSDoc: Source: database_api.js</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css" />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
  </head>

  <body>
    <div id="main">
      <h1 class="page-title">Source: database_api.js</h1>

      <section>
        <article>
          <pre class="prettyprint source linenums"><code>/**
 * Class to create a static singleton connection with MongoDB database
 * @class DatabaseAPI
 * @requires mongodb
 */
const mongodb = require('mongodb');

class DatabaseAPI {
  static #clientID =
    'mongodb+srv://max:fizjic-jihwy4-Momqez@cluster0.zpk7p.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority';

  static #databaseName = 'Cluster0';
  static #database = null; // singleton database instance

  /**
   * To connect to database
   */
  static async connectDB() {
    // replace this
    const client = await mongodb.MongoClient.connect(this.#clientID, {
      useNewUrlParser: true,
    });
    // Database name here
    this.#database = client.db(this.#databaseName);
    console.log('MongoDB database is connected');
  }

  /**
   * To connect to collection in database
   */
  static connectCollection(collectionName) {
    try {
      console.log(collectionName, 'is connected');
      return this.#database.collection(collectionName);
    } catch (err) {
      if (!this.#database) {
        console.log('Database not connected yet');
        console.log('Reattempting connection');
        this.connectDB();
      }
      console.log(err);
    }
  }
}

module.exports = DatabaseAPI;
</code></pre>
        </article>
      </section>
    </div>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Modules</h3>
      <ul>
        <li><a href="module-api_helper.html">api_helper</a></li>
        <li><a href="module-app.html">app</a></li>
        <li><a href="module-carpark_manager.html">carpark_manager</a></li>
        <li><a href="module-search_manager.html">search_manager</a></li>
        <li><a href="module-users_manager.html">users_manager</a></li>
      </ul>
      <h3>Classes</h3>
      <ul>
        <li><a href="DatabaseAPI.html">DatabaseAPI</a></li>
        <li><a href="URAAPI.html">URAAPI</a></li>
      </ul>
    </nav>

    <br class="clear" />

    <footer>
      Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sat Mar 26 2022 16:05:03
      GMT+0800 (Singapore Standard Time)
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
